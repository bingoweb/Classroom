<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - 2/D SÄ±nÄ±f Panosu</title>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Poppins:wght@600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/fonts.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <header class="admin-main-header">
            <h1>Admin Panel</h1>
            <button onclick="showQRCode()" class="header-action-btn">ğŸ“± Mobil BaÄŸlan</button>
        </header>

        <div class="tabs">
            <button class="tab-btn active" onclick="showTab('students')">Ã–ÄŸrenciler</button>
            <button class="tab-btn" onclick="showTab('roles')">GÃ¶revler</button>
            <button class="tab-btn" onclick="showTab('attendance')">Yoklama</button>
            <button class="tab-btn" onclick="showTab('slides')">Slayt YÃ¶netimi</button>
            <button class="tab-btn" onclick="showTab('settings')">Ayarlar</button>
        </div>

        <!-- Students Section -->
        <div id="students" class="content-section active">

            <!-- Header with Stats -->
            <div class="admin-section-header header-purple">
                <div class="admin-header-flex">
                    <div>
                        <h1 class="admin-header-title">
                            ğŸ‘¨â€ğŸ“ Ã–ÄŸrenci YÃ¶netimi
                        </h1>
                        <p class="admin-header-desc">
                            Ã–ÄŸrencileri ekleyin, dÃ¼zenleyin ve yÃ¶netin
                        </p>
                    </div>
                    <div id="studentStats" class="admin-stats-container">
                        <div class="admin-stat-item">
                            <div class="stat-value" id="totalStudents">0</div>
                            <div class="stat-label">Toplam</div>
                        </div>
                        <div class="stat-divider"></div>
                        <div class="admin-stat-item">
                            <div class="stat-value" id="maleStudents">0</div>
                            <div class="stat-label">ğŸ‘¦ Erkek</div>
                        </div>
                        <div class="stat-divider"></div>
                        <div class="admin-stat-item">
                            <div class="stat-value" id="femaleStudents">0</div>
                            <div class="stat-label">ğŸ‘§ KÄ±z</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Cards Grid -->
            <div class="admin-grid">

                <!-- Add Single Student Card -->
                <div class="admin-card card-pink">
                    <h2 class="card-title">
                        â• Tekli Ã–ÄŸrenci Ekle
                    </h2>
                    <p class="card-text">
                        Bir Ã¶ÄŸrenci eklemek iÃ§in formu doldurun
                    </p>
                    <form id="addStudentForm" class="admin-form-col">
                        <div class="admin-input-group">
                            <label class="admin-label">
                                ğŸ“ Ad Soyad <span class="admin-label-required">*</span>
                            </label>
                            <input type="text" name="name" placeholder="Ã–rn: Ahmet YÄ±lmaz" required class="admin-input">
                        </div>
                        <div class="admin-input-group">
                            <label class="admin-label">
                                ğŸ‘¤ Cinsiyet <span class="admin-label-required">*</span>
                            </label>
                            <select name="gender" required class="admin-select">
                                <option value="M">ğŸ‘¦ Erkek</option>
                                <option value="F">ğŸ‘§ KÄ±z</option>
                            </select>
                        </div>
                        <div class="admin-input-group">
                            <label class="admin-label">
                                ğŸ“· FotoÄŸraf <span class="small-hint">(opsiyonel)</span>
                            </label>
                            <input type="file" name="photo" accept="image/*" class="admin-input admin-input-file">
                            <small class="small-hint">
                                ğŸ’¡ BoÅŸ bÄ±rakÄ±rsanÄ±z varsayÄ±lan avatar kullanÄ±lÄ±r
                            </small>
                        </div>
                        <button type="submit" class="btn-submit">
                            âœ… Ã–ÄŸrenci Ekle
                        </button>
                    </form>
                </div>

                <!-- Excel Import Card -->
                <div class="admin-card card-blue">
                    <h2 class="card-title">
                        ğŸ“Š Excel'den Toplu Ekle
                    </h2>
                    <p class="card-text">
                        E-okul formatÄ±nda Excel dosyasÄ± yÃ¼kleyin
                    </p>

                    <!-- Excel Format Info -->
                    <div class="info-box">
                        <div class="fw-600 mb-xs text-sm">ğŸ“‹ Gerekli Format:</div>
                        <ul class="text-xs" style="margin: 0; padding-left: 20px; line-height: 1.6; opacity: 0.95;">
                            <li>Ä°lk satÄ±r baÅŸlÄ±k olmalÄ±</li>
                            <li>SÃ¼tunlar: "Ã–ÄŸrenci No", "Ad Soyad", "Cinsiyet"</li>
                            <li>Cinsiyet: E=Erkek, K=KÄ±z</li>
                            <li>E-okul'dan alÄ±nan dosyalar uyumludur</li>
                        </ul>
                    </div>

                    <form id="excelImportForm" class="admin-form-col">
                        <div class="admin-input-group">
                            <label class="admin-label">
                                ğŸ“ Excel DosyasÄ± <span class="admin-label-required">*</span>
                            </label>
                            <input type="file" id="excelFileInput" accept=".xlsx,.xls" required class="admin-input admin-input-file">
                            <small class="small-hint">
                                ğŸ’¡ Desteklenen: .xlsx, .xls
                            </small>
                        </div>
                        <button type="submit" class="btn-submit">
                            ğŸ“¤ Excel'i YÃ¼kle
                        </button>
                    </form>
                    <div id="excelImportResult" class="info-box mt-md bg-white-20">
                    </div>
                </div>
            </div>

            <!-- Student List Card -->
            <div class="card p-xl">
                <div class="list-header-flex">
                    <h2 class="list-header-title">
                        ğŸ“š Ã–ÄŸrenci Listesi
                    </h2>

                    <!-- Search and Filter -->
                    <div class="list-filter-group">
                        <input type="text" id="studentSearch" placeholder="ğŸ” Ã–ÄŸrenci ara..." onkeyup="filterStudents()" class="search-input">
                        <select id="genderFilter" onchange="filterStudents()" class="filter-select">
                            <option value="">TÃ¼mÃ¼</option>
                            <option value="M">ğŸ‘¦ Erkek</option>
                            <option value="F">ğŸ‘§ KÄ±z</option>
                        </select>
                    </div>
                </div>

                <!-- Students Grid/List -->
                <div id="studentList" class="student-list mt-lg">
                    <!-- Students will be rendered here -->
                </div>
            </div>

        </div>


        <!-- Roles Section -->
        <div id="roles" class="content-section">

            <!-- Header -->
            <div class="admin-section-header header-pink">
                <h1 class="admin-header-title">
                    ğŸ¯ GÃ¶rev YÃ¶netimi
                </h1>
                <p class="admin-header-desc">
                    SÄ±nÄ±f baÅŸkanÄ±, yardÄ±mcÄ±lar, nÃ¶betÃ§iler ve haftanÄ±n yÄ±ldÄ±zlarÄ±nÄ± atayÄ±n
                </p>
            </div>

            <!-- Role Assignment Cards -->
            <div class="admin-grid">

                <!-- President Card -->
                <div class="admin-card card-purple">
                    <div class="card-header-flex">
                        <div class="card-icon-lg">ğŸ‘‘</div>
                        <div>
                            <h3 class="card-title-sm">SÄ±nÄ±f BaÅŸkanÄ±</h3>
                            <p class="card-subtitle">SÄ±nÄ±fÄ±n lideri</p>
                        </div>
                    </div>

                    <div class="info-box">
                        <div class="small-hint mb-xs">ğŸ’¡ Maksimum: 1 kiÅŸi</div>
                    </div>

                    <select id="presidentSelect" class="admin-select mb-sm">
                        <option value="">Ã–ÄŸrenci seÃ§in...</option>
                    </select>

                    <button onclick="assignRole('president')" class="btn-submit btn-green">
                        âœ… BaÅŸkan Ata
                    </button>

                    <div id="currentPresident" class="info-box info-box-dark mt-md" style="min-height: 50px;">
                        <!-- Current president will be shown here -->
                    </div>
                </div>

                <!-- Vice Presidents Card -->
                <div class="admin-card card-pink">
                    <div class="card-header-flex">
                        <div class="card-icon-lg">ğŸ¤</div>
                        <div>
                            <h3 class="card-title-sm">BaÅŸkan YardÄ±mcÄ±larÄ±</h3>
                            <p class="card-subtitle">BaÅŸkanÄ±n destekÃ§ileri</p>
                        </div>
                    </div>

                    <div class="info-box">
                        <div class="small-hint mb-xs">ğŸ’¡ Maksimum: 2 kiÅŸi</div>
                    </div>

                    <select id="vicePresidentSelect" class="admin-select mb-sm">
                        <option value="">Ã–ÄŸrenci seÃ§in...</option>
                    </select>

                    <button onclick="assignRole('vice_president')" class="btn-submit btn-green">
                        â• YardÄ±mcÄ± Ekle
                    </button>

                    <div id="currentVicePresidents" class="info-box info-box-dark mt-md" style="min-height: 50px;">
                        <!-- Current vice presidents will be shown here -->
                    </div>
                </div>

                <!-- Duty Students Card -->
                <div class="admin-card card-blue">
                    <div class="card-header-flex">
                        <div class="card-icon-lg">ğŸ§¹</div>
                        <div>
                            <h3 class="card-title-sm">NÃ¶betÃ§iler</h3>
                            <p class="card-subtitle">SÄ±nÄ±f dÃ¼zeni sorumlularÄ±</p>
                        </div>
                    </div>

                    <div class="info-box">
                        <div class="small-hint mb-xs">ğŸ’¡ Maksimum: 4 kiÅŸi</div>
                    </div>

                    <select id="dutySelect" class="admin-select mb-sm">
                        <option value="">Ã–ÄŸrenci seÃ§in...</option>
                    </select>

                    <button onclick="assignRole('duty')" class="btn-submit btn-green">
                        â• NÃ¶betÃ§i Ekle
                    </button>

                    <div id="currentDuty" class="info-box info-box-dark mt-md" style="min-height: 50px;">
                        <!-- Current duty students will be shown here -->
                    </div>
                </div>
            </div>

            <!-- Stars Section -->
            <div class="admin-card card-orange">
                <div class="star-card-header">
                    <div class="card-header-flex">
                        <div class="star-card-icon">â­</div>
                        <div>
                            <h3 class="star-card-title">HaftanÄ±n YÄ±ldÄ±zlarÄ±</h3>
                            <p class="star-card-subtitle">BaÅŸarÄ±lÄ± Ã¶ÄŸrencileri Ã¶dÃ¼llendirin</p>
                        </div>
                    </div>

                    <div class="info-box">
                        <div class="small-hint">ğŸ’¡ SÄ±nÄ±rsÄ±z Ã¶ÄŸrenci eklenebilir</div>
                    </div>
                </div>

                <div class="star-action-group">
                    <select id="starSelect" class="admin-select star-select">
                        <option value="">YÄ±ldÄ±z Ã¶ÄŸrenci seÃ§in...</option>
                    </select>

                    <button onclick="assignRole('star')" class="btn-submit btn-star-add">
                        â­ YÄ±ldÄ±z Ekle
                    </button>
                </div>

                <div id="currentStars" class="info-box info-box-dark stars-grid">
                    <!-- Current stars will be shown here -->
                </div>
            </div>

        </div>

        <!-- Attendance Section -->
        <div id="attendance" class="content-section">
            <div class="card">
                <h2>GÃ¼nlÃ¼k Yoklama</h2>
                <div class="attendance-controls">
                    <label>Tarih:</label>
                    <input type="date" id="attendanceDate" class="attendance-date-input">
                    <button onclick="loadAttendanceForDate()" class="btn-sm">YÃ¼kle</button>
                    <button onclick="setTodayDate()" class="btn-sm">BugÃ¼n</button>
                </div>
                <div id="attendanceList" class="student-list"></div>
                <div class="mt-lg">
                    <button onclick="saveAttendance()" class="btn-submit bg-primary">YoklamayÄ± Kaydet</button>
                </div>
                <div id="attendanceSummary" class="mt-lg p-md bg-dark-05" style="border-radius: 10px;">
                    <h3>Ã–zet</h3>
                    <div id="attendanceSummaryContent"></div>
                </div>
            </div>
        </div>

        <!-- Slides Section -->
        <div id="slides" class="content-section">
            <div class="card">
                <h2>Yeni Slayt Ekle</h2>
                <button onclick="showSlideForm()" class="btn-submit w-auto mb-lg">+ Yeni Slayt Ekle</button>
            </div>

            <div class="card mt-lg">
                <h2>Slayt Listesi</h2>
                <p class="text-muted text-sm mb-sm">SlaytlarÄ± sÃ¼rÃ¼kle-bÄ±rak ile sÄ±ralayabilirsiniz.</p>
                <div id="slidesList" class="slides-list">
                    <!-- Slides will be loaded here -->
                </div>
            </div>

            <div class="card" style="margin-top: 20px;">
                <h2>Genel Slayt AyarlarÄ±</h2>
                <form id="slideSettingsForm" class="admin-form-col">
                    <div>
                        <label>VarsayÄ±lan GÃ¶sterim SÃ¼resi (saniye)</label><br>
                        <input type="number" id="defaultDuration" min="1" max="60" value="10" class="admin-input mt-xs">
                    </div>
                    <div>
                        <label>VarsayÄ±lan GeÃ§iÅŸ Modu</label><br>
                        <select id="defaultTransitionMode" class="admin-select mt-xs">
                            <option value="auto">Otomatik AkÄ±llÄ± SeÃ§im</option>
                            <option value="random">Random</option>
                            <option value="manual">Manuel</option>
                        </select>
                    </div>
                    <div>
                        <label>VarsayÄ±lan GeÃ§iÅŸ SÃ¼resi (saniye)</label><br>
                        <input type="number" id="defaultTransitionDuration" min="0.5" max="3" step="0.1" value="1" class="admin-input mt-xs">
                    </div>
                    <button type="submit" class="btn-submit">AyarlarÄ± Kaydet</button>
                </form>
            </div>
        </div>

        <!-- Error Logs Section -->
        <div id="error-logs" class="content-section">
            <div class="card">
                <div class="error-logs-header">
                    <h2>Hata LoglarÄ±</h2>
                    <div class="log-actions">
                        <label class="debug-toggle">
                            <input type="checkbox" id="debugModeToggle" onchange="toggleDebugMode()">
                            <span>Debug Modu</span>
                        </label>
                        <button onclick="refreshErrorLogs()" class="btn-refresh">Yenile</button>
                        <button onclick="exportErrorLogs()" class="btn-export">DÄ±ÅŸa Aktar</button>
                        <button onclick="clearOldLogs()" class="btn-clear">Eski LoglarÄ± Temizle</button>
                    </div>
                </div>

                <!-- Filters -->
                <div class="log-filters">
                    <div>
                        <label>Seviye:</label><br>
                        <select id="logLevelFilter" onchange="filterErrorLogs()" class="admin-select log-filter-select">
                            <option value="">TÃ¼mÃ¼</option>
                            <option value="ERROR">ERROR</option>
                            <option value="WARN">WARN</option>
                            <option value="INFO">INFO</option>
                            <option value="DEBUG">DEBUG</option>
                        </select>
                    </div>
                    <div>
                        <label>BileÅŸen:</label><br>
                        <select id="logComponentFilter" onchange="filterErrorLogs()" class="admin-select log-filter-select">
                            <option value="">TÃ¼mÃ¼</option>
                            <option value="SLIDESHOW">SLIDESHOW</option>
                            <option value="ADMIN">ADMIN</option>
                            <option value="API">API</option>
                            <option value="TRANSITIONS">TRANSITIONS</option>
                            <option value="MEDIA">MEDIA</option>
                            <option value="DATABASE">DATABASE</option>
                            <option value="SYSTEM">SYSTEM</option>
                        </select>
                    </div>
                    <div>
                        <label>Son:</label><br>
                        <select id="logTimeFilter" onchange="filterErrorLogs()" class="admin-select log-filter-select">
                            <option value="">TÃ¼mÃ¼</option>
                            <option value="1h">Son 1 Saat</option>
                            <option value="24h">Son 24 Saat</option>
                            <option value="7d">Son 7 GÃ¼n</option>
                            <option value="30d">Son 30 GÃ¼n</option>
                        </select>
                    </div>
                </div>

                <!-- Error Logs List -->
                <div id="errorLogsList" style="max-height: 600px; overflow-y: auto;">
                    <p class="text-center text-muted p-lg">YÃ¼kleniyor...</p>
                </div>
            </div>
        </div>

        <!-- Settings Section -->
        <div id="settings" class="content-section">

            <!-- Header -->
            <div class="admin-section-header header-blue">
                <h1 class="admin-header-title">
                    âš™ï¸ Sistem AyarlarÄ±
                </h1>
                <p class="admin-header-desc">
                    Ana sayfa ve ekran iÃ§in detaylÄ± ayarlarÄ± yapÄ±landÄ±rÄ±n
                </p>
            </div>

            <!-- Settings Grid -->
            <div class="admin-grid">

                <!-- Display Settings Card -->
                <div class="admin-card card-light-blue text-dark">
                    <h2 class="card-title">
                        ğŸ–¥ï¸ Ekran AyarlarÄ±
                    </h2>
                    <p class="card-text">
                        Ana ekran gÃ¶rÃ¼nÃ¼m ve davranÄ±ÅŸÄ±nÄ± Ã¶zelleÅŸtirin
                    </p>

                    <div class="admin-form-col" style="gap: 20px;">
                        <!-- Display Mode -->
                        <div class="info-box">
                            <label class="admin-label">
                                ğŸ“º Ekran Modu
                            </label>
                            <div class="settings-btn-group">
                                <button onclick="setDisplayMode('normal')" id="displayModeNormal" class="settings-btn">
                                    ğŸªŸ Normal
                                </button>
                                <button onclick="setDisplayMode('fullscreen')" id="displayModeFullscreen" class="settings-btn">
                                    â›¶ Tam Ekran
                                </button>
                                <button onclick="setDisplayMode('kiosk')" id="displayModeKiosk" class="settings-btn">
                                    ğŸ¢ Kiosk
                                </button>
                            </div>
                            <small class="small-hint">
                                ğŸ’¡ <strong>Normal:</strong> Pencere modu | <strong>Tam Ekran:</strong> F11 gibi |
                                <strong>Kiosk:</strong> Sadece iÃ§erik
                            </small>
                        </div>

                        <!-- Connection Mode -->
                        <div class="info-box">
                            <label class="admin-label">
                                ğŸŒ BaÄŸlantÄ± Modu
                            </label>
                            <div class="settings-btn-group">
                                <button onclick="setConnectionMode('offline')" id="connOffline" class="settings-btn" style="display: flex; align-items: center; justify-content: center; gap: 8px;">
                                    <span>ğŸš«</span> Offline
                                </button>
                                <button onclick="setConnectionMode('online')" id="connOnline" class="settings-btn" style="display: flex; align-items: center; justify-content: center; gap: 8px;">
                                    <span>ğŸŒ</span> Online
                                </button>
                            </div>
                            <small class="small-hint">
                                ğŸ’¡ <strong>Offline:</strong> Yerel fontlar, hÄ±zlÄ± | <strong>Online:</strong> Google
                                Fonts, hava durumu
                            </small>
                        </div>

                        <!-- Theme -->
                        <div class="info-box">
                            <label class="admin-label">
                                ğŸ¨ Renk TemasÄ±
                            </label>
                            <div class="settings-btn-group">
                                <button onclick="setColorTheme('light')" id="themeLight" class="settings-btn">
                                    â˜€ï¸ AÃ§Ä±k
                                </button>
                                <button onclick="setColorTheme('dark')" id="themeDark" class="settings-btn bg-dark-slate text-white">
                                    ğŸŒ™ Koyu
                                </button>
                                <button onclick="setColorTheme('auto')" id="themeAuto" class="settings-btn bg-gradient-auto">
                                    ğŸŒ— Otomatik
                                </button>
                            </div>
                        </div>

                        <!-- Font Size -->
                        <div class="info-box">
                            <label class="admin-label">
                                ğŸ”¤ YazÄ± Boyutu
                            </label>
                            <input type="range" id="fontSize" min="80" max="150" value="100" step="10" oninput="updateFontSizeDisplay()" class="range-slider range-primary">
                            <div class="range-labels">
                                <span>80%</span>
                                <span id="fontSizeValue" class="text-primary fs-1-1">100%</span>
                                <span>150%</span>
                            </div>
                            <div id="fontSizePreview" class="preview-box">
                                Ã–nizleme: SÄ±nÄ±f Panosu
                            </div>
                        </div>

                        <!-- Auto Refresh with Live Countdown -->
                        <div class="info-box">
                            <label class="admin-label">
                                ğŸ”„ Otomatik Yenileme
                            </label>
                            <div class="mb-sm" style="display: flex; gap: 10px; align-items: center;">
                                <input type="number" id="autoRefreshInterval" min="0" max="120" value="0" oninput="updateRefreshDisplay()" class="admin-input flex-1">
                                <span style="font-weight: 600;">dakika</span>
                            </div>
                            <div id="refreshStatus" class="preview-box mt-0 text-sm">
                                â¸ï¸ KapalÄ±
                            </div>
                            <small class="small-hint">
                                ğŸ’¡ 0 = KapalÄ± | 5-15 dk Ã¶nerilen | 120 dk maximum
                            </small>
                        </div>

                        <!-- Clock Format with Preview -->
                        <div class="info-box">
                            <label class="admin-label">
                                ğŸ• Saat FormatÄ±
                            </label>
                            <select id="clockFormat" onchange="updateClockPreview()" class="admin-select">
                                <option value="24">24 Saat FormatÄ±</option>
                                <option value="12">12 Saat FormatÄ± (AM/PM)</option>
                            </select>
                            <div id="clockPreview" class="preview-box fs-1-5 fw-600 text-primary">
                                14:30:45
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Noise Meter Settings -->
                <div class="admin-card card-peach text-dark">
                    <h2 class="card-title">
                        ğŸ”Š GÃ¼rÃ¼ltÃ¼ Ã–lÃ§er AyarlarÄ±
                    </h2>
                    <p class="card-text">
                        Ses hassasiyeti ve uyarÄ± seviyelerini hassas ÅŸekilde ayarlayÄ±n
                    </p>

                    <div class="admin-form-col" style="gap: 20px;">
                        <!-- Quick Presets -->
                        <div class="info-box">
                            <label class="admin-label">
                                âš¡ HÄ±zlÄ± Ayarlar
                            </label>
                            <div class="noise-meter-grid">
                                <button onclick="setNoisePreset('quiet')" class="settings-btn">
                                    ğŸ˜Œ Sessiz
                                </button>
                                <button onclick="setNoisePreset('normal')" class="settings-btn">
                                    ğŸ˜Š Normal
                                </button>
                                <button onclick="setNoisePreset('active')" class="settings-btn">
                                    ğŸ‰ Aktif
                                </button>
                            </div>
                            <small class="small-hint">
                                ğŸ’¡ SÄ±nÄ±f durumuna gÃ¶re Ã¶nceden ayarlanmÄ±ÅŸ profiller
                            </small>
                        </div>

                        <!-- Sensitivity -->
                        <div class="info-box">
                            <label class="admin-label">
                                ğŸ“Š Hassasiyet Seviyesi
                            </label>
                            <input type="range" id="noiseSensitivity" min="1" max="10" value="5" oninput="updateSensitivityDisplay()" class="range-slider range-noise">
                            <div class="range-labels">
                                <span>ğŸ”‡ DÃ¼ÅŸÃ¼k</span>
                                <span id="sensitivityValue" class="fw-600 fs-1-2 text-primary">5</span>
                                <span>ğŸ”Š YÃ¼ksek</span>
                            </div>
                            <div class="mt-sm p-sm bg-white br-6">
                                <div class="text-xs mb-xs fw-600">Hassasiyet AÃ§Ä±klamasÄ±:</div>
                                <div id="sensitivityDescription" class="text-sm text-muted">
                                    Orta seviye - Standart sÄ±nÄ±f ortamÄ± iÃ§in uygundur
                                </div>
                            </div>
                        </div>

                        <!-- Thresholds -->
                        <div class="info-box">
                            <label class="admin-label">
                                ğŸ¯ EÅŸik DeÄŸerleri
                            </label>

                            <!-- Warning Threshold -->
                            <div class="mb-md">
                                <div class="admin-header-flex mb-xs">
                                    <span class="fw-600">âš ï¸ UyarÄ± EÅŸiÄŸi</span>
                                    <span id="warningValue" class="fw-600 text-warning fs-1-1">70%</span>
                                </div>
                                <input type="range" id="warningThreshold" min="0" max="95" value="70" oninput="updateThresholdDisplay()" class="range-slider range-warning">
                            </div>

                            <!-- Danger Threshold -->
                            <div>
                                <div class="admin-header-flex mb-xs">
                                    <span class="fw-600">ğŸš¨ Tehlike EÅŸiÄŸi</span>
                                    <span id="dangerValue" class="fw-600 text-danger fs-1-1">85%</span>
                                </div>
                                <input type="range" id="dangerThreshold" min="5" max="100" value="85" oninput="updateThresholdDisplay()" class="range-slider range-danger">
                            </div>

                            <!-- Visual Preview -->
                            <div class="mt-md p-sm bg-white br-8">
                                <div class="text-xs mb-xs fw-600">ğŸ“Š Renkli Ã–nizleme:</div>
                                <div class="preview-bar-container">
                                    <div id="previewGreen" class="preview-segment bg-success"></div>
                                    <div id="previewOrange" class="preview-segment bg-warning"></div>
                                    <div id="previewRed" class="preview-segment bg-danger"></div>
                                </div>
                                <div class="range-labels">
                                    <span>0%</span>
                                    <span id="warningLabel">70%</span>
                                    <span id="dangerLabel">85%</span>
                                    <span>100%</span>
                                </div>
                            </div>
                        </div>

                        <!-- Test Button -->
                        <div class="info-box">
                            <button onclick="testNoiseMeter()" class="btn-submit">
                                ğŸ¤ Mikrofonu Test Et
                            </button>
                            <div id="testResult" class="preview-box">
                                Test sonucu burada gÃ¶rÃ¼necek
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Slideshow Settings -->
                <div class="admin-card card-pastel text-dark">
                    <h2 class="card-title">
                        ğŸ¬ Slayt GÃ¶sterisi AyarlarÄ±
                    </h2>
                    <p class="card-text">
                        Slayt gÃ¶sterisinin davranÄ±ÅŸÄ±nÄ± Ã¶zelleÅŸtirin
                    </p>

                    <div class="admin-form-col">
                        <!-- Auto Play -->
                        <div>
                            <label style="display: flex; align-items: center; gap: 10px; font-weight: 600; cursor: pointer;">
                                <input type="checkbox" id="slideshowAutoPlay" checked>
                                <span>â–¶ï¸ Otomatik BaÅŸlat</span>
                            </label>
                            <small class="small-hint" style="margin-left: 28px;">
                                Sayfa yÃ¼klendiÄŸinde slayt gÃ¶sterisini baÅŸlat
                            </small>
                        </div>

                        <!-- Loop -->
                        <div>
                            <label style="display: flex; align-items: center; gap: 10px; font-weight: 600; cursor: pointer;">
                                <input type="checkbox" id="slideshowLoop" checked>
                                <span>ğŸ” DÃ¶ngÃ¼ Modunda Ã‡alÄ±ÅŸtÄ±r</span>
                            </label>
                            <small class="small-hint" style="margin-left: 28px;">
                                Son slaytta baÅŸa dÃ¶n
                            </small>
                        </div>

                        <!-- Show Progress -->
                        <div>
                            <label style="display: flex; align-items: center; gap: 10px; font-weight: 600; cursor: pointer;">
                                <input type="checkbox" id="slideshowProgress" checked>
                                <span>ğŸ“Š Ä°lerleme Ã‡ubuÄŸu GÃ¶ster</span>
                            </label>
                            <small class="small-hint" style="margin-left: 28px;">
                                Alt kÄ±sÄ±mda ilerleme Ã§ubuÄŸu gÃ¶ster
                            </small>
                        </div>
                    </div>
                </div>

                <!-- Equalizer Theme Card -->
                <div class="admin-card card-pink text-dark">
                    <h2 class="card-title">
                        ğŸ¨ Ekolayzer TemasÄ±
                    </h2>
                    <p class="card-text">
                        GÃ¼rÃ¼ltÃ¼ Ã¶lÃ§er iÃ§in renk temasÄ± seÃ§in
                    </p>

                    <div id="admin-noise-preview" class="bg-dark-overlay br-15 p-md mb-lg">
                        <div class="equalizer-container theme-neon" id="equalizer-container" style="height: 100px;">
                            <span class="eq-label">ğŸ™ï¸</span>
                            <div class="equalizer-bars">
                                <!-- 64 Bar - noise-meter.js tarafÄ±ndan dolduruluyor -->
                            </div>
                        </div>
                        <div class="text-center mt-sm">
                            <button id="admin-mic-btn" onclick="startAdminMicrophone()" class="btn-submit">
                                ğŸ¤ Mikrofonu BaÅŸlat
                            </button>
                            <div id="admin-mic-status" class="mt-xs text-xs text-muted-light">
                                Mikrofon bekleniyor...
                            </div>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 15px; padding: 10px;">
                        <button onclick="setEqualizerTheme('neon')" id="theme-btn-neon" class="theme-btn btn-neon">Neon</button>
                        <button onclick="setEqualizerTheme('ocean')" id="theme-btn-ocean" class="theme-btn btn-ocean">Ocean</button>
                        <button onclick="setEqualizerTheme('sunset')" id="theme-btn-sunset" class="theme-btn btn-sunset">Sunset</button>
                        <button onclick="setEqualizerTheme('forest')" id="theme-btn-forest" class="theme-btn btn-forest">Forest</button>
                        <button onclick="setEqualizerTheme('love')" id="theme-btn-love" class="theme-btn btn-love">Love</button>
                        <button onclick="setEqualizerTheme('royal')" id="theme-btn-royal" class="theme-btn btn-royal">Royal</button>
                        <button onclick="setEqualizerTheme('ice')" id="theme-btn-ice" class="theme-btn btn-ice">Ice</button>
                        <button onclick="setEqualizerTheme('fire')" id="theme-btn-fire" class="theme-btn btn-fire">Fire</button>
                        <button onclick="setEqualizerTheme('matrix')" id="theme-btn-matrix" class="theme-btn btn-matrix">Matrix</button>
                        <button onclick="setEqualizerTheme('rainbow')" id="theme-btn-rainbow" class="theme-btn btn-rainbow">Rainbow</button>
                    </div>

                </div>
                <div id="currentThemeDisplay" class="mt-md p-sm bg-dark-10 br-8 fw-600 text-center">
                </div>
            </div>
        </div>

        <!-- Save Button -->
        <div class="mt-xl text-center">
            <button onclick="saveAllSettings()" class="btn-save-all">
                ğŸ’¾ TÃ¼m AyarlarÄ± Kaydet
            </button>
        </div>

        <!-- Info Section -->
        <div class="card mt-xl p-lg bg-gradient-info-light border-none">
            <div style="display: flex; align-items: center; gap: 15px;">
                <div class="fs-3rem">â„¹ï¸</div>
                <div>
                    <h3 class="m-0 mb-xs text-dark">Sistem Bilgisi</h3>
                    <p class="m-0 text-muted fs-095">
                        âœ… Sistem tamamen lokal Ã§alÄ±ÅŸmaktadÄ±r. Ä°nternet baÄŸlantÄ±sÄ± gerekmez.<br>
                        âœ… Ayarlar tarayÄ±cÄ±da saklanÄ±r, her cihaz iÃ§in ayrÄ± ayrÄ± yapÄ±landÄ±rÄ±lmalÄ±dÄ±r.<br>
                        âœ… DeÄŸiÅŸiklikler anÄ±nda uygulanÄ±r, ana sayfa otomatik gÃ¼ncellenir.
                    </p>
                </div>
            </div>
        </div>
    </div>
    </div>

    <!-- QR Code Modal -->
    <div id="qrModal" class="qr-modal">
        <div class="qr-content">
            <h2>Mobil BaÄŸlantÄ±</h2>
            <p>Bu QR kodu telefonunuzla tarayÄ±n:</p>
            <div id="qrcode" style="margin: 20px auto; display: flex; justify-content: center;"></div>
            <button onclick="closeQRCode()">Kapat</button>
        </div>
    </div>

    <!-- Photo Upload Modal -->
    <div id="photoUploadModal" class="qr-modal" style="display: none;">
        <div class="qr-content">
            <h2>Resim YÃ¼kle</h2>
            <p><strong id="photoUploadStudentName"></strong> iÃ§in resim yÃ¼kleyin</p>
            <form id="photoUploadForm" class="admin-form-col" style="margin-top: 20px;">
                <input type="hidden" id="photoUploadStudentId">
                <input type="file" id="photoFileInput" accept="image/*" required class="admin-input-file">
                <div style="display: flex; gap: 10px;">
                    <button type="submit" class="btn-submit" style="flex: 1; margin-top: 0;">YÃ¼kle</button>
                    <button type="button" onclick="closePhotoUploadModal()" class="btn-modal-cancel">Ä°ptal</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Slide Form Modal -->
    <div id="slideFormModal" class="qr-modal" style="display: none;">
        <div class="qr-content modal-content-scroll">
            <h2 id="slideFormTitle" class="slide-form-title">ğŸ¬ Yeni Slayt Ekle</h2>
            <p class="slide-form-desc">
                SlaytÄ±nÄ±zÄ±n iÃ§eriÄŸini, gÃ¶rÃ¼nÃ¼mÃ¼nÃ¼ ve geÃ§iÅŸ efektlerini Ã¶zelleÅŸtirebilirsiniz.
            </p>

            <form id="slideForm" class="slide-form-container">
                <input type="hidden" id="slideId">

                <!-- SECTION 1: TEMEL BÄ°LGÄ°LER -->
                <div class="section-box section-basic">
                    <h3 class="section-header">
                        ğŸ“ Temel Bilgiler
                    </h3>

                    <div style="display: grid; gap: 15px;">
                        <!-- BaÅŸlÄ±k -->
                        <div>
                            <label class="admin-label">
                                BaÅŸlÄ±k <span class="small-hint" style="display: inline;">(opsiyonel)</span>
                            </label>
                            <input type="text" id="slideTitle" placeholder="Ã–rn: SÄ±nÄ±f KurallarÄ±" class="slide-input-light">
                            <small class="small-hint">
                                ğŸ’¡ SlaytÄ± tanÄ±mlamak iÃ§in kÄ±sa bir baÅŸlÄ±k
                            </small>
                        </div>

                        <!-- Ä°Ã§erik Tipi -->
                        <div>
                            <label class="admin-label">
                                Ä°Ã§erik Tipi <span class="admin-label-required">*</span>
                            </label>
                            <select id="slideContentType" required class="slide-input-light" style="cursor: pointer;">
                                <option value="">ğŸ”½ SeÃ§iniz</option>
                                <option value="rule">ğŸ“œ Kural</option>
                                <option value="announcement">ğŸ“¢ Duyuru</option>
                                <option value="photo">ğŸ“· FotoÄŸraf SlaytÄ±</option>
                                <option value="celebration">ğŸ‰ Kutlama Videosu</option>
                                <option value="custom">âš™ï¸ Ã–zel</option>
                            </select>
                            <small class="small-hint">
                                ğŸ’¡ SlaytÄ±n gÃ¶rÃ¼ntÃ¼leneceÄŸi baÄŸlamÄ± belirler
                            </small>
                        </div>
                    </div>
                </div>

                <!-- SECTION 2: MEDYA DOSYASI -->
                <div class="section-box section-media">
                    <h3 class="section-header">
                        ğŸ¨ Medya DosyasÄ±
                    </h3>

                    <div>
                        <label id="slideMediaLabel" class="admin-label">
                            ğŸ“ Resim, GIF veya Video <span class="admin-label-required">*</span>
                        </label>

                        <input type="file" id="slideMedia" name="slide" accept="image/*,video/*" class="slide-input-light" style="cursor: pointer;">
                        <small class="small-hint">
                            ğŸ’¡ Maksimum dosya boyutu: 100 MB | Desteklenen: JPG, PNG, GIF, MP4, WEBM
                        </small>

                        <!-- Preview -->
                        <div id="slideMediaPreview" class="media-preview-box">
                            <span style="opacity: 0.6;">ğŸ“‹ Ã–nizleme burada gÃ¶rÃ¼necek</span>
                        </div>

                        <div id="slideMediaInfo" style="margin-top: 8px; font-size: 0.9rem; background: rgba(0,0,0,0.2); padding: 8px; border-radius: 6px;">
                        </div>
                        <div id="slideCurrentMediaInfo" style="margin-top: 8px; font-size: 0.9rem; background: rgba(76, 175, 80, 0.3); padding: 8px; border-radius: 6px; font-weight: 600;">
                        </div>

                        <!-- Upload Progress -->
                        <div id="slideUploadProgress" style="display: none; margin-top: 12px;">
                            <div class="upload-progress-container">
                                <div id="slideProgressBar" class="upload-progress-bar">
                                </div>
                            </div>
                            <div id="slideProgressText" style="text-align: center; margin-top: 8px; font-size: 0.9rem; font-weight: 500;"></div>
                        </div>
                    </div>
                </div>

                <!-- SECTION 3: Ä°Ã‡ERÄ°K (Conditional) -->
                <div id="slideTextContentDiv" class="section-box section-text" style="display: none;">
                    <h3 class="section-header">
                        âœï¸ Metin Ä°Ã§eriÄŸi
                    </h3>
                    <label class="admin-label">
                        Kural veya Duyuru Metni
                    </label>
                    <textarea id="slideTextContent" rows="4" placeholder="KuralÄ±nÄ±zÄ± veya duyurunuzu buraya yazÄ±n..." class="slide-input-light slide-textarea"></textarea>
                    <small class="small-hint">
                        ğŸ’¡ Bu metin slaytÄ±n Ã¼zerinde gÃ¶rÃ¼necektir
                    </small>
                </div>

                <!-- SECTION 4: ZAMANLAMA -->
                <div class="section-box section-timing">
                    <h3 class="section-header">
                        â±ï¸ Zamanlama AyarlarÄ±
                    </h3>

                    <div style="display: grid; gap: 15px;">
                        <!-- GÃ¶sterim SÃ¼resi -->
                        <div>
                            <label class="admin-label">
                                Ekranda Kalma SÃ¼resi <span class="small-hint" style="display: inline;">(saniye)</span>
                            </label>
                            <input type="number" id="slideDisplayDuration" min="1" max="60" placeholder="VarsayÄ±lan: 10 saniye" class="slide-input-light">
                            <small class="small-hint">
                                ğŸ’¡ BoÅŸ bÄ±rakÄ±rsanÄ±z sistem varsayÄ±lanÄ± kullanÄ±lÄ±r (10 saniye)
                            </small>
                        </div>

                        <!-- Video Auto Advance -->
                        <div id="slideVideoSettings" style="display: none; background: rgba(0,0,0,0.15); padding: 12px; border-radius: 8px;">
                            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; font-size: 1rem;">
                                <input type="checkbox" id="slideVideoAutoAdvance" style="width: 20px; height: 20px; cursor: pointer;">
                                <span>ğŸ¬ Video bitince otomatik olarak sonraki slayta geÃ§</span>
                            </label>
                            <small class="small-hint" style="margin-left: 30px;">
                                ğŸ’¡ Ä°ÅŸaretlenirse video bittiÄŸinde beklenmeden geÃ§iÅŸ yapÄ±lÄ±r
                            </small>
                        </div>
                    </div>
                </div>

                <!-- SECTION 5: GEÃ‡Ä°Å EFEKTLERÄ° -->
                <div class="section-box section-transition">
                    <h3 class="section-header text-dark">
                        âœ¨ GeÃ§iÅŸ Efektleri
                    </h3>

                    <div style="display: grid; gap: 15px;">
                        <!-- GeÃ§iÅŸ Modu -->
                        <div>
                            <label class="admin-label">
                                GeÃ§iÅŸ Modu
                            </label>
                            <select id="slideTransitionMode" class="slide-input-light bg-white" style="cursor: pointer;">
                                <option value="auto">ğŸ¤– Otomatik (AkÄ±llÄ± SeÃ§im)</option>
                                <option value="random">ğŸ² Rastgele</option>
                                <option value="manual">ğŸ¯ Manuel (Kendiniz seÃ§in)</option>
                            </select>
                            <small class="small-hint text-muted">
                                ğŸ’¡ <strong>Otomatik:</strong> Yapay zeka uygun efekti seÃ§er | <strong>Rastgele:</strong>
                                Her seferinde farklÄ± | <strong>Manuel:</strong> Siz belirleyin
                            </small>
                        </div>

                        <!-- Manuel GeÃ§iÅŸ Efekti (Conditional) -->
                        <div id="slideTransitionManualDiv" style="display: none;">
                            <label class="admin-label">
                                GeÃ§iÅŸ Efekti SeÃ§imi
                            </label>
                            <select id="slideTransitionType" class="slide-input-light bg-white" style="cursor: pointer;">
                                <option value="">VarsayÄ±lan (Fade)</option>
                                <optgroup label="ğŸ­ Basit GeÃ§iÅŸler">
                                    <option value="fade">Fade (Kararma/AydÄ±nlanma)</option>
                                    <option value="slide-left">â¬…ï¸ Sola KaydÄ±r</option>
                                    <option value="slide-right">â¡ï¸ SaÄŸa KaydÄ±r</option>
                                    <option value="slide-up">â¬†ï¸ YukarÄ± KaydÄ±r</option>
                                    <option value="slide-down">â¬‡ï¸ AÅŸaÄŸÄ± KaydÄ±r</option>
                                </optgroup>
                                <optgroup label="ğŸ¨ Dinamik Efektler">
                                    <option value="zoom-in">ğŸ” YakÄ±nlaÅŸtÄ±r</option>
                                    <option value="zoom-out">ğŸ” UzaklaÅŸtÄ±r</option>
                                    <option value="rotate">ğŸ”„ DÃ¶ndÃ¼r</option>
                                    <option value="flip">ğŸ” Ã‡evir</option>
                                </optgroup>
                                <optgroup label="ğŸš€ Ä°leri Seviye">
                                    <option value="blur">ğŸ’« Blur (BulanÄ±klaÅŸtÄ±r)</option>
                                    <option value="glitch">âš¡ Glitch</option>
                                    <option value="particle">âœ¨ Particle</option>
                                    <option value="morph">ğŸŒ€ Morph</option>
                                    <option value="wipe">ğŸ¬ Wipe</option>
                                    <option value="dissolve">ğŸ’§ Dissolve</option>
                                    <option value="cube">ğŸ“¦ Cube</option>
                                    <option value="cover">ğŸ“„ Cover</option>
                                    <option value="uncover">ğŸ“ƒ Uncover</option>
                                    <option value="push">â†—ï¸ Push</option>
                                </optgroup>
                            </select>
                            <small class="small-hint text-muted">
                                ğŸ’¡ FarklÄ± efektleri deneyerek size en uygun olanÄ± bulabilirsiniz
                            </small>
                        </div>

                        <!-- GeÃ§iÅŸ SÃ¼resi -->
                        <div>
                            <label class="admin-label">
                                GeÃ§iÅŸ Animasyon SÃ¼resi <span class="small-hint" style="display: inline;">(saniye)</span>
                            </label>
                            <input type="number" id="slideTransitionDuration" min="0.5" max="3" step="0.1" placeholder="VarsayÄ±lan: 1 saniye" class="slide-input-light bg-white">
                            <small class="small-hint text-muted">
                                ğŸ’¡ GeÃ§iÅŸ animasyonunun ne kadar sÃ¼receÄŸi (0.5 - 3 saniye arasÄ± Ã¶nerilir)
                            </small>
                        </div>
                    </div>
                </div>

                <!-- ACTION BUTTONS -->
                <div class="modal-actions">
                    <button type="submit" class="btn-modal-save">
                        ğŸ’¾ Kaydet
                    </button>
                    <button type="button" onclick="closeSlideForm()" class="btn-modal-cancel">
                        âŒ Ä°ptal
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- SheetJS for Excel parsing -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>

    <script src="../js/config.js"></script>
    <script src="../js/api-service.js"></script>
    <script src="../js/interval-manager.js"></script>
    <script src="../js/utils.js"></script>
    <script src="../js/logger.js"></script>
    <script src="settings-handler.js"></script>
    <script src="admin.js"></script>
</body>

</html>
